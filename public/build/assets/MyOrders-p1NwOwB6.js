import{V as u,r as l,j as e}from"./app-D_W3hKl1.js";import{d}from"./index-DZ6zD-KU.js";import j from"./FrontMaster-BcUNaE0F.js";import"./Footer-osmuTJyN.js";import"./Nav-DKNr4rQr.js";const y=()=>{const{orders:s}=u().props,[a,i]=l.useState(s.data),[o,n]=l.useState(!1);console.log(s);const h=r=>{window.confirm("Are you sure you want to cancel this order?")&&x(r)},x=r=>{n(!0),d.Inertia.delete(route("cancelorder",r),{onSuccess:t=>{i(t.props.orders.data),alert("Order canceled successfully"),n(!1)},onError:t=>{n(!1),alert("An error occurred while canceling the order"),console.error(t)}})},c=r=>{d.Inertia.get(route("myorders"),{page:r},{preserveState:!0})};return e.jsx(e.Fragment,{children:e.jsx(j,{children:e.jsxs("div",{className:"container",style:{marginTop:"50px"},children:[e.jsx("h1",{className:"text-center mb-4",children:"My Orders"}),o&&e.jsx("div",{className:"loading-indicator text-center",children:"Processing..."})," ",e.jsx("div",{className:"order-table-container",children:e.jsxs("table",{className:"table table-striped table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Order Id"}),e.jsx("th",{children:"Products"}),e.jsx("th",{children:"Total Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:a.length>0?a.map(r=>e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:r.id}),e.jsx("td",{children:e.jsx("ul",{children:r.products.map((t,p)=>e.jsxs("li",{children:[t.name," - Price: $",t.price," - Quantity: ",t.quantity]},p))})}),e.jsxs("td",{children:["$",r.total_price]}),e.jsx("td",{children:r.status}),e.jsx("td",{children:r.status==="pending"&&e.jsx("button",{className:"btn btn-danger",onClick:()=>h(r.id),children:"Cancel Order"})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center",children:"No orders found"})})})]})}),e.jsxs("div",{className:"pagination-container text-center",children:[e.jsx("button",{onClick:()=>c(s.current_page-1),disabled:s.current_page===1,className:"btn btn-outline-primary me-2",children:"Previous"}),e.jsxs("span",{children:["Page ",s.current_page," of ",s.last_page]}),e.jsx("button",{onClick:()=>c(s.current_page+1),disabled:s.current_page===s.last_page,className:"btn btn-outline-primary ms-2",children:"Next"})]})]})})})};export{y as default};
