import{V as F,a as R,r as N,R as C,j as e}from"./app-D_W3hKl1.js";import S from"./FrontMaster-BcUNaE0F.js";import{d as b}from"./index-DZ6zD-KU.js";import"./Footer-osmuTJyN.js";import"./Nav-DKNr4rQr.js";const H=({product:s})=>{var j,p;const{auth:i}=F().props,{data:f,setData:v,post:u,processing:D,errors:E}=R({product_id:null,quantity:1,price:0}),[r,h]=N.useState({rating:"5",message:"",name:"",email:(j=i==null?void 0:i.user)==null?void 0:j.email,product_id:s.id}),[t,g]=N.useState({}),m=a=>{h({...r,[a.target.name]:a.target.value})},y=a=>{b.Inertia.delete(route("admin.feedback.destroy",a))},w=a=>{a.preventDefault(),b.Inertia.post(route("admin.feedback.store"),r,{onError:l=>{g(l)},onSuccess:()=>{var l;alert("Review submitted successfully!"),h({rating:"5",message:"",name:"",email:(l=i==null?void 0:i.user)==null?void 0:l.email,product_id:s.id}),g({})}})},k=(a,l,n)=>{const c=l<n?l:n,d={...f,product_id:a,price:c};v(d),console.log(d),u(route("cart.store"),{data:{product_id:a,quantity:1,price:c},onSuccess:()=>{alert("Product added to cart successfully!")},onError:$=>{console.error("Errors:",$),alert("An error occurred. Please try again.")}})},[o,x]=C.useState(!1),_=a=>{x(!0),b.Inertia.post(route("favorite.store"),{product_id:a},{onSuccess:()=>{x(!1),alert("Product added to favorite successfully!")},onError:()=>{x(!1),alert("An error occurred. Please try again.")}})};return e.jsx(e.Fragment,{children:e.jsxs(S,{children:[e.jsx("div",{className:"container product-container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"product-image mb-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 mb-3",children:e.jsx("img",{src:`http://127.0.0.1:8000/images/product_image/${(p=s.images[0])==null?void 0:p.image}`,alt:"Product Image",className:"img-fluid",style:{maxHeight:"500px",objectFit:"cover"}})}),e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"row",children:s.images.slice(1).map((a,l)=>e.jsx("div",{className:"col-4 mb-3",children:e.jsx("img",{src:`http://127.0.0.1:8000/images/product_image/${a.image}`,alt:`Product Image ${l+1}`,className:"img-fluid",style:{maxHeight:"150px",objectFit:"cover"}})},l))})})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"product-details p-6 bg-white shadow-lg rounded-2xl",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:s.name}),e.jsx("div",{className:"price mb-4",children:s.discounted_price<s.price?e.jsxs("p",{className:"text-2xl font-semibold text-green-600",children:[e.jsxs("span",{className:"line-through text-red-500 text-sm mr-3",children:["$",s.price]}),"$",s.discounted_price.toFixed(2)]}):e.jsxs("p",{className:"text-2xl font-semibold text-gray-800",children:["$",s.price]})}),e.jsxs("div",{className:"rating mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400 text-lg",children:"★★★☆☆"}),e.jsxs("span",{className:"text-gray-600 text-sm",children:["(",s.feed_backs.length," Reviews)"]})]}),e.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),e.jsx("p",{className:`font-semibold ${s.stock===0?"text-red-600":"text-green-600"}`,children:s.stock===0?"Out of stock":"In stock"}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsxs("button",{className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow transition ${o?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red-500 hover:bg-red-600 text-white"}`,onClick:o?void 0:()=>_(s.id),disabled:o,children:[e.jsx("i",{className:"fas fa-heart"})," Add to Favorite"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white font-semibold shadow transition",onClick:()=>k(s.id,s.discounted_price,s.price),children:[e.jsx("i",{className:"fas fa-shopping-cart"})," Add to Cart"]})]}),e.jsx("ul",{className:"list-unstyled mt-6 text-gray-700 space-y-2"})]})})]})}),e.jsxs("div",{className:"container my-5",children:[e.jsxs("ul",{className:"nav nav-tabs",id:"productTabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:"nav-link active",id:"description-tab","data-bs-toggle":"tab","data-bs-target":"#description",type:"button",role:"tab","aria-controls":"description","aria-selected":"true",children:"Description"})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:"nav-link",id:"info-tab","data-bs-toggle":"tab","data-bs-target":"#info",type:"button",role:"tab","aria-controls":"info","aria-selected":"false",children:"Info"})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"reviews-tab","data-bs-toggle":"tab","data-bs-target":"#reviews",type:"button",role:"tab","aria-controls":"reviews","aria-selected":"false",children:["Reviews (",s.feed_backs.length,")"]})})]}),e.jsxs("div",{className:"tab-content",id:"productTabsContent",children:[e.jsx("div",{className:"tab-pane fade show active",id:"description",role:"tabpanel","aria-labelledby":"description-tab",children:e.jsx("p",{className:"mt-4",children:s.description})}),e.jsx("div",{className:"tab-pane fade",id:"info",role:"tabpanel","aria-labelledby":"info-tab",children:e.jsxs("ul",{className:"mt-4",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Name:"})," ",s.name," kg"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Price:"})," ","$",s.price]}),s.discounted_price&&e.jsxs("li",{children:[e.jsx("strong",{children:"After Discount:"})," ","$",s.discounted_price]})]})}),e.jsx("div",{className:"tab-pane fade",id:"reviews",role:"tabpanel","aria-labelledby":"reviews-tab",children:e.jsxs("div",{className:"mt-4",children:[e.jsxs("h5",{className:"mb-4",children:[s.feed_backs.length," review"," ",s.feed_backs.length>1?"s":""," ","for ",s.name]}),s.feed_backs.map((a,l)=>{var n,c;return e.jsxs("div",{className:"d-flex position-relative align-items-start mb-4 p-3 border border-light rounded shadow-sm",children:[e.jsx("img",{src:"/images/images.jpeg",alt:"Reviewer",className:"rounded-circle me-3",style:{width:"50px",height:"50px",objectFit:"cover"}}),e.jsxs("div",{className:"d-flex flex-column",children:[e.jsxs("h6",{className:"mb-1",children:[a.name,e.jsx("small",{className:"text-muted ms-2",children:a.created_at.slice(0,10)})]}),e.jsx("div",{className:"d-flex",children:[1,2,3,4,5].map(d=>e.jsx("span",{className:`text-warning ${d<=a.rating?"fa fa-star":"fa fa-star-o"}`,style:{fontSize:"18px"}},d))}),e.jsx("p",{className:"mt-2",children:a.message})]}),(((n=i==null?void 0:i.user)==null?void 0:n.email)===a.email||((c=i==null?void 0:i.user)==null?void 0:c.role)==="admin")&&e.jsx("button",{onClick:()=>y(a.id),className:`btn btn-dark btn-sm rounded 
                                              position-absolute top-1 end-1
                                              `,children:e.jsx("i",{className:"fa fa-trash"})})]},l)}),(i==null?void 0:i.user)&&e.jsxs("div",{className:"card shadow-sm rounded p-4 mt-5",children:[e.jsx("h5",{className:"mb-4",children:"Add a Review"}),e.jsxs("form",{onSubmit:w,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"rating",className:"form-label",children:"Rating:"}),e.jsx("select",{id:"rating",name:"rating",value:r.rating,onChange:m,className:`form-select ${t.rating?"is-invalid":""}`,children:[5,4,3,2,1].map(a=>e.jsx("option",{value:a,children:a},a))}),t.rating&&e.jsx("div",{className:"invalid-feedback",children:t.rating})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"message",className:"form-label",children:"Review:"}),e.jsx("textarea",{id:"message",name:"message",value:r.message,onChange:m,className:`form-control ${t.message?"is-invalid":""}`,rows:"4"}),t.message&&e.jsx("div",{className:"invalid-feedback",children:t.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Name:"}),e.jsx("input",{type:"text",id:"name",name:"name",value:r.name,onChange:m,className:`form-control ${t.name?"is-invalid":""}`}),t.name&&e.jsx("div",{className:"invalid-feedback",children:t.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",disabled:!0,value:r.email,onChange:m,className:`form-control ${t.email?"is-invalid":""}`}),t.email&&e.jsx("div",{className:"invalid-feedback",children:t.email})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100 py-2",children:"Submit Review"})]})]})]})})]})]})]})})};export{H as default};
