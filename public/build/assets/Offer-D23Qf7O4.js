import{V as w,r as S,a as C,R as A,j as e,U as d}from"./app-D_W3hKl1.js";import F from"./FrontMaster-BcUNaE0F.js";import{d as n}from"./index-DZ6zD-KU.js";import"./Footer-osmuTJyN.js";import"./Nav-DKNr4rQr.js";const L=()=>{const{products:r={data:[],from:0,to:0,total:0,links:[]},filters:c}=w().props,[i,j]=S.useState({min:0,max:1e3});console.log(r);const h=s=>{const{name:a,value:l}=s.target;j(t=>({...t,[a]:l}))},g=()=>{n.Inertia.get(route("getProductsoffers"),{sort_by:(c==null?void 0:c.sort_by)||"",min_price:i.min,max_price:i.max})},{data:p,setData:f,post:u,processing:P,errors:$}=C({product_id:null,quantity:1,price:0}),N=(s,a,l)=>{const t=a<l?a:l,x={...p,product_id:s,price:t};f(x),console.log(x),u(route("cart.store"),{data:{product_id:s,quantity:1,price:t},onSuccess:()=>{alert("Product added to cart successfully!")},onError:_=>{console.error("Errors:",_),alert("An error occurred. Please try again.")}})},v=s=>{const a=s.target.value;n.Inertia.get(route("getProductsoffers"),{sort_by:a})},y=s=>{s&&n.Inertia.get(s)},[m,o]=A.useState(!1),b=s=>{o(!0),n.Inertia.post(route("favorite.store"),{product_id:s},{onSuccess:()=>{o(!1),alert("Product added to favorite successfully!")},onError:()=>{o(!1),alert("An error occurred. Please try again.")}})};return e.jsx(e.Fragment,{children:e.jsxs(F,{children:[e.jsx("div",{className:"bg-light",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("img",{style:{height:"350px",overflow:"hidden"},src:"/images/premium_photo-1706140675031-1e0548986ad1.jpeg",alt:"Login Image",className:"img-fluid w-100"})})})}),e.jsx("div",{className:"container my-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-9",children:[e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col d-flex justify-content-between",children:[e.jsxs("p",{children:["Showing ",r.from,"–",r.to," of"," ",r.total," results"]}),e.jsxs("select",{className:"form-select w-auto",onChange:v,children:[e.jsx("option",{value:"",children:"Sort by popularity"}),e.jsx("option",{value:"price_low_to_high",children:"Sort by price: low to high"}),e.jsx("option",{value:"price_high_to_low",children:"Sort by price: high to low"})]})]})}),e.jsx("div",{className:"row g-4",children:Array.isArray(r.data)&&r.data.length>0?r.data.map(s=>{var a;return e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"product-card",children:[e.jsx(d,{href:route("shop.show",s.id),children:e.jsx("img",{style:{width:"100%",height:"200px"},src:`http://127.0.0.1:8000/images/product_image/${(a=s.images[0])==null?void 0:a.image}`,alt:s.name})}),e.jsxs("div",{className:"hover-overlay",children:[e.jsx("span",{className:"icon",onClick:m?void 0:()=>b(s.id),style:{cursor:m?"not-allowed":"pointer"},children:e.jsx("i",{className:"fas fa-heart"})}),e.jsx("span",{className:"icon",onClick:()=>N(s.id,s.discounted_price,s.price),children:e.jsx("i",{className:"fas fa-shopping-cart"})}),e.jsx("span",{children:e.jsx(d,{href:route("shop.show",s.id),className:"icon",children:e.jsx("i",{className:"fas fa-eye"})})})]}),e.jsx("h5",{className:"mt-2",children:e.jsx(d,{href:route("shop.show",s.id),children:s.name})}),e.jsx("p",{className:"price text-xl font-semibold text-gray-800",children:s.discounted_price<s.price?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"line-through text-red-500 text-sm mr-2",children:["$",s.price]}),e.jsxs("span",{className:"text-green-600",children:["$",s.discounted_price.toFixed(2)]})]}):e.jsxs("span",{children:["$",s.price]})}),s.offers&&s.offers.length>0&&e.jsxs("div",{className:"offers mt-4",children:[e.jsx("h6",{className:"text-md font-medium text-gray-700 mb-2",children:"Available Offers:"}),e.jsx("ul",{className:"list-disc list-inside",children:s.offers.map(l=>e.jsxs("li",{className:"text-gray-600 text-sm",children:["Save"," ",e.jsxs("span",{className:"text-green-600 font-bold",children:[l.discount_percentage,"%"]})]},l.id))})]})]})},s.id)}):e.jsx("p",{children:"No products available"})}),e.jsx("nav",{className:"mt-4",children:e.jsx("ul",{className:"pagination justify-content-center",children:Array.isArray(r.links)&&r.links.map((s,a)=>e.jsx("li",{className:`page-item ${s.active?"active":""} ${s.url?"":"disabled"}`,children:e.jsx("button",{className:"page-link",onClick:()=>y(s.url),dangerouslySetInnerHTML:{__html:s.label}})},a))})})]}),e.jsxs("div",{className:"col-lg-3",children:[e.jsxs("div",{className:"sidebar mb-4",children:[e.jsx("h5",{children:"Filter by price"}),e.jsx("input",{type:"range",className:"form-range",name:"min",min:"20",max:i.max,value:i.min,onChange:h}),e.jsx("input",{type:"range",className:"form-range",name:"max",min:i.min,max:"400",value:i.max,onChange:h}),e.jsxs("p",{children:["Price: $",i.min," — $",i.max]}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:g,children:"Filter"})]}),e.jsxs("div",{className:"sidebar",children:[e.jsx("h5",{children:"Categories"}),e.jsxs("ul",{className:"list-unstyled",children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Decoration (18)"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Dinnerware (12)"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Furniture (20)"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Lighting (5)"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Special (11)"})})]})]})]})]})})]})})};export{L as default};
