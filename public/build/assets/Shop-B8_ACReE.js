import{V as k,r as h,R as T,a as $,j as e,U as p}from"./app-D_W3hKl1.js";import E from"./FrontMaster-BcUNaE0F.js";import{d as n}from"./index-DZ6zD-KU.js";import"./Footer-osmuTJyN.js";import"./Nav-DKNr4rQr.js";const V=()=>{const{products:t={data:[],from:0,to:0,total:0,links:[]},filters:r,categories:c}=k().props;console.log(c);const[i,u]=h.useState({min:0,max:1e3}),[o,v]=h.useState(""),[x,y]=h.useState(""),[g,m]=T.useState(!1),{data:N,setData:_,post:f,processing:R,errors:M}=$({product_id:null,quantity:1,price:0}),j=s=>{const{name:a,value:l}=s.target;u(d=>({...d,[a]:l}))},b=()=>{n.Inertia.get(route("shop.getProducts"),{sort_by:(r==null?void 0:r.sort_by)||"",min_price:i.min,max_price:i.max,name:o,category_id:x})},C=()=>{n.Inertia.get(route("shop.getProducts"),{name:o,category_id:x,sort_by:(r==null?void 0:r.sort_by)||"",min_price:i.min,max_price:i.max})},w=s=>{const a=s.target.value;y(a),console.log(a),n.Inertia.get(route("shop.getProducts"),{category_id:a,name:o,sort_by:(r==null?void 0:r.sort_by)||"",min_price:i.min,max_price:i.max})},S=(s,a,l)=>{const d=a<l?a:l,I={...N,product_id:s,price:d};_(I),f(route("cart.store"),{data:{product_id:s,quantity:1,price:d},onSuccess:()=>{alert("Product added to cart successfully!")},onError:U=>{alert("Please confirm the order.")}})},P=s=>{m(!0),n.Inertia.post(route("favorite.store"),{product_id:s},{onSuccess:()=>{m(!1),alert("Product added to favorite successfully!")},onError:()=>{m(!1),alert("An error occurred. Please try again.")}})},A=s=>{const a=s.target.value;n.Inertia.get(route("shop.getProducts"),{sort_by:a})},F=s=>{s&&n.Inertia.get(s)};return e.jsx(e.Fragment,{children:e.jsxs(E,{children:[e.jsx("div",{className:"bg-light",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx("img",{style:{height:"350px",overflow:"hidden"},src:"/images/premium_photo-1706140675031-1e0548986ad1.jpeg",alt:"Shop Image",className:"img-fluid w-100"})})})}),e.jsx("div",{className:"container my-5",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-9",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col d-flex",children:[e.jsx("input",{type:"text",className:"form-control me-2",placeholder:"Search products...",value:o,onChange:s=>v(s.target.value)}),e.jsx("button",{className:"btn btn-primary",onClick:C,children:"Search"})]})}),e.jsx("div",{className:"row mb-3",children:e.jsxs("div",{className:"col d-flex justify-content-between",children:[e.jsxs("p",{children:["Showing ",t.from,"â€“",t.to," of"," ",t.total," results"]}),e.jsxs("select",{className:"form-select w-auto",onChange:A,children:[e.jsx("option",{value:"",children:"Sort by popularity"}),e.jsx("option",{value:"price_low_to_high",children:"Sort by price: low to high"}),e.jsx("option",{value:"price_high_to_low",children:"Sort by price: high to low"})]})]})}),e.jsx("div",{className:"row g-4",children:Array.isArray(t.data)&&t.data.length>0?t.data.map(s=>{var a;return e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"product-card",children:[e.jsx(p,{href:route("shop.show",s.id),children:e.jsx("img",{style:{width:"100%",height:"200px"},src:`http://127.0.0.1:8000/images/product_image/${(a=s.images[0])==null?void 0:a.image}`,alt:s.name})}),e.jsxs("div",{className:"hover-overlay",children:[e.jsx("span",{className:"icon",onClick:g?void 0:()=>P(s.id),style:{cursor:g?"not-allowed":"pointer"},children:e.jsx("i",{className:"fas fa-heart"})}),e.jsx("span",{className:"icon",onClick:()=>S(s.id,s.discounted_price,s.price),children:e.jsx("i",{className:"fas fa-shopping-cart"})}),e.jsx("span",{children:e.jsx(p,{href:route("shop.show",s.id),className:"icon",children:e.jsx("i",{className:"fas fa-eye"})})})]}),e.jsx("h5",{className:"mt-2",children:e.jsx(p,{href:route("shop.show",s.id),children:s.name})}),e.jsx("p",{className:"price",children:s.discounted_price<s.price?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"line-through text-red-500 text-sm mr-2",children:["$",s.price]}),e.jsxs("span",{className:"text-green-600",children:["$",s.discounted_price.toFixed(2)]})]}):e.jsxs("span",{children:["$",s.price]})})]})},s.id)}):e.jsx("p",{children:"No products available"})}),e.jsx("nav",{className:"mt-4",children:e.jsx("ul",{className:"pagination justify-content-center",children:Array.isArray(t.links)&&t.links.map((s,a)=>e.jsx("li",{className:`page-item ${s.active?"active":""} ${s.url?"":"disabled"}`,children:e.jsx("button",{className:"page-link",onClick:()=>F(s.url),dangerouslySetInnerHTML:{__html:s.label}})},a))})})]}),e.jsxs("div",{className:"col-lg-3",children:[e.jsxs("div",{className:"sidebar mb-4",children:[e.jsx("h4",{children:"Filter by Price"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("input",{type:"number",name:"min",className:"form-control me-2",placeholder:"Min",value:i.min,onChange:j}),e.jsx("input",{type:"number",name:"max",className:"form-control",placeholder:"Max",value:i.max,onChange:j})]}),e.jsx("button",{className:"btn btn-primary mt-3",onClick:b,children:"Filter"})]}),e.jsxs("div",{className:"sidebar",children:[e.jsx("h4",{children:"Categories"}),e.jsxs("select",{className:"form-select",onChange:w,children:[e.jsx("option",{value:"",children:"All Categories"}),c==null?void 0:c.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]})]})]})})]})})};export{V as default};
