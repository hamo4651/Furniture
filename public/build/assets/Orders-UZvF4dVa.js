import{V as u,r as x,j as e}from"./app-D_W3hKl1.js";import{d as l}from"./index-DZ6zD-KU.js";const m=()=>{const{allOrders:o}=u().props,[s,d]=x.useState(o),i=(r,t)=>{const n=t.target.value;l.Inertia.put(route("admin.updateStatus",r),{status:n},{onSuccess:a=>{alert("Status updated successfully"),d(a.props.orders)},onError:a=>{alert("An error occurred while updating the status"),console.error(a)}})},h=r=>{window.confirm("Are you sure you want to remove this order?")&&l.Inertia.delete(route("admin.deleteorder",r),{onSuccess:n=>{alert("Order removed successfully"),d(n.props.orders)},onError:n=>{alert("An error occurred while removing the order"),console.error(n)}})},c=r=>{l.Inertia.get(r,{},{preserveState:!0,preserveScroll:!0})};return e.jsxs("div",{className:"container-fluid px-5",style:{marginTop:"30px"},children:[e.jsx("h1",{className:"text-center mb-4",children:"All Orders"}),e.jsx("a",{href:route("index"),className:"btn btn-primary",children:"Return back"}),e.jsxs("table",{className:"table table-striped table-bordered shadow-sm",children:[e.jsx("thead",{className:"bg-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"User Name"}),e.jsx("th",{children:"User Email"}),e.jsx("th",{children:"User Phone"}),e.jsx("th",{children:"Products"}),e.jsx("th",{children:"Total Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:s.data&&s.data.length>0?s.data.map(r=>e.jsxs("tr",{className:"align-middle",children:[e.jsx("td",{children:r.user.name}),e.jsx("td",{children:r.user.email}),e.jsx("td",{children:r.user.phone_number}),e.jsx("td",{children:e.jsx("ul",{children:r.products.map((t,n)=>e.jsxs("li",{children:[t.name," - price: $",t.price," - quantity: ",t.quantity]},n))})}),e.jsxs("td",{children:["$",r.total_price]}),e.jsx("td",{children:e.jsxs("select",{className:"form-select form-select-sm w-100",value:r.status,onChange:t=>i(r.id,t),children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-danger btn-sm me-2",onClick:()=>h(r.id),children:e.jsx("i",{className:"fas fa-trash"})})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center text-muted",children:"No orders found"})})})]}),s.last_page>1&&e.jsxs("div",{className:"d-flex justify-content-between",children:[s.prev_page_url&&e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>c(s.prev_page_url),children:"Previous"}),e.jsx("div",{className:"my-auto",children:e.jsxs("strong",{children:["Page ",s.current_page," of ",s.last_page]})}),s.next_page_url&&e.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>c(s.next_page_url),children:"Next"})]})]})};export{m as default};
