import{V as h,a as g,j as e,b as c}from"./app-D_W3hKl1.js";import x from"./Master-C1QC2gFZ.js";import"./Footer-TlX0IQiB.js";import"./Nav-wOqnItCM.js";import"./Script-By3RXvDw.js";import"./Side-B7SL-hek.js";import"./index-DZ6zD-KU.js";function k(){const{product:t,categories:o}=h().props,{data:i,setData:l,put:d,errors:s}=g({name:t.name||"",description:t.description||"",price:t.price||"",quantity:t.quantity||"",status:t.status||"instock",category_id:t.category_id||"",new_images:null}),m=a=>{if(a.preventDefault(),d(route("admin.product.update",{product:t.id}),{onSuccess:()=>{alert("Product updated successfully!")}}),i.new_images){const r=new FormData;Array.from(i.new_images).forEach(n=>{r.append("images[]",n)}),c.post(route("admin.product.uploadImages",{product:t.id}),r,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{alert("Images uploaded successfully!"),location.reload()}).catch(n=>{console.error(n),alert("Error uploading images.")})}},u=a=>{confirm("Are you sure you want to delete this image?")&&c.delete(route("admin.product.image.destroy",{image:a})).then(r=>{alert(r.data.message);const n=t.images.filter(p=>p.id!==a);t.images=n,window.location.reload()}).catch(r=>{console.error(r),alert("Error deleting image.")})};return e.jsxs(x,{children:[e.jsx("h1",{className:"text-3xl font-bold text-center",children:"Edit Product"}),e.jsxs("div",{className:"container bg-light my-4 p-4",children:[e.jsxs("form",{onSubmit:m,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Product Name"}),e.jsx("input",{type:"text",id:"name",className:`form-control ${s.name?"is-invalid":""}`,value:i.name,onChange:a=>l("name",a.target.value)}),s.name&&e.jsx("div",{className:"invalid-feedback",children:s.name})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"Description"}),e.jsx("textarea",{id:"description",className:`form-control ${s.description?"is-invalid":""}`,value:i.description,onChange:a=>l("description",a.target.value)}),s.description&&e.jsx("div",{className:"invalid-feedback",children:s.description})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"price",className:"form-label",children:"Price"}),e.jsx("input",{type:"number",id:"price",className:`form-control ${s.price?"is-invalid":""}`,value:i.price,onChange:a=>l("price",a.target.value)}),s.price&&e.jsx("div",{className:"invalid-feedback",children:s.price})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"quantity",className:"form-label",children:"Quantity"}),e.jsx("input",{type:"number",id:"quantity",className:`form-control ${s.quantity?"is-invalid":""}`,value:i.quantity,onChange:a=>l("quantity",a.target.value)}),s.quantity&&e.jsx("div",{className:"invalid-feedback",children:s.quantity})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),e.jsxs("select",{id:"status",className:`form-select ${s.status?"is-invalid":""}`,value:i.status,onChange:a=>l("status",a.target.value),children:[e.jsx("option",{value:"instock",children:"In Stock"}),e.jsx("option",{value:"outofstock",children:"Out of Stock"})]}),s.status&&e.jsx("div",{className:"invalid-feedback",children:s.status})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"category_id",className:"form-label",children:"Category"}),e.jsxs("select",{id:"category_id",className:`form-select ${s.category_id?"is-invalid":""}`,value:i.category_id,onChange:a=>l("category_id",a.target.value),children:[e.jsx("option",{value:"",children:"Select Category"}),o.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),s.category_id&&e.jsx("div",{className:"invalid-feedback",children:s.category_id})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"images",className:"form-label",children:"Add New Images"}),e.jsx("input",{type:"file",id:"images",className:"form-control",multiple:!0,onChange:a=>l("new_images",a.target.files)}),s.new_images&&e.jsx("div",{className:"invalid-feedback",children:s.new_images})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Update Product"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{children:"Uploaded Images:"}),e.jsx("div",{className:"d-flex flex-wrap",children:t.images.map(a=>e.jsxs("div",{className:"position-relative m-2",children:[e.jsx("img",{src:`http://127.0.0.1:8000/images/product_image/${a.image}`,alt:"Product Image",style:{width:"100px",height:"100px",objectFit:"cover"}}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm position-absolute top-0 end-0",onClick:()=>u(a.id),children:"Ã—"})]},a.id))})]})]})]})}export{k as default};
